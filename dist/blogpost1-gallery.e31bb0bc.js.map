{"version":3,"sources":["src/vanilla/components/alignment.ts","src/vanilla/components/animation.ts","src/vanilla/components/axis.ts","src/vanilla/components/utils.ts","src/vanilla/components/counter.ts","src/vanilla/components/direction.ts","src/vanilla/components/eventStore.ts","src/vanilla/components/vector1d.ts","src/vanilla/components/dragHandler.ts","src/vanilla/components/dragTracker.ts","src/vanilla/components/limit.ts","src/vanilla/components/pxToPercent.ts","src/vanilla/components/scrollBody.ts","src/vanilla/components/scrollBounds.ts","src/vanilla/components/scrollContain.ts","src/vanilla/components/scrollLimit.ts","src/vanilla/components/scrollLooper.ts","src/vanilla/components/scrollProgress.ts","src/vanilla/components/scrollSnap.ts","src/vanilla/components/scrollTarget.ts","src/vanilla/components/scrollTo.ts","src/vanilla/components/slideLooper.ts","src/vanilla/components/slideFocus.ts","src/vanilla/components/slidesInView.ts","src/vanilla/components/translate.ts","src/vanilla/components/engine.ts","src/vanilla/components/eventEmitter.ts","src/vanilla/components/options.ts","src/vanilla/index.ts","prevAndNextButtons.js","parallax.js","index.js","../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/css-loader.js","../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["Alignment","params","viewSize","align","predefined","start","center","end","n","percent","Number","measure","self","Animation","callback","animationFrame","ifAnimating","active","cb","window","requestAnimationFrame","stop","cancelAnimationFrame","proceed","Axis","axis","scroll","cross","node","_a","getBoundingClientRect","width","height","map","value","iStart","iStop","oStart","oStop","mathSign","Math","abs","deltaAbs","valueB","valueA","factorAbs","diff","roundToDecimals","decimalPoints","pow","round","debounce","time","timeout","clearTimeout","setTimeout","groupArray","array","size","groups","i","length","push","slice","arrayKeys","Object","keys","removeClass","className","cl","classList","contains","remove","addClass","add","Counter","limit","loop","min","max","type","withinLimit","counter","get","set","sign","clone","Direction","direction","applyTo","EventStore","listeners","handler","options","addEventListener","removeEventListener","removeAll","filter","Vector1D","vector","readNumber","subtract","multiply","divide","normalize","DragHandler","target","scrollBody","dragFree","animation","scrollTo","root","dragTracker","location","events","scrollAxis","crossAxis","focusNodes","startScroll","startCross","dragStartPoint","activationEvents","interactionEvents","snapForceBoost","mouse","touch","freeForceBoost","baseSpeed","dragThreshold","pointerIsDown","preventScroll","preventClick","isMouse","addActivationEvents","undefined","down","up","click","addInteractionEvents","document","move","removeAllEvents","isFocusNode","name","nodeName","indexOf","forceBoost","boost","allowedForce","force","scrollTarget","index","currentLocation","byDistance","targetChanged","seekNext","destination","reachedAny","next","byIndex","distance","evt","button","isMoving","clearPreventClick","isNotFocusNode","preventDefault","pointerDown","useBaseMass","useSpeed","readPoint","emit","cancelable","moveScroll","moveCross","diffScroll","diffCross","pointerMove","rawForce","pointerUp","speedFactor","clickAllowed","DragTracker","pxToPercent","coords","x","y","startDrag","diffDrag","lastDrag","pointValue","trackInterval","trackLength","trackTime","trackPoints","lastMoveTime","Date","getTime","touches","c","point","nowTime","diffTime","currentPoint","trackPoint","sort","p1","p2","Limit","reachedMin","reachedMax","removeOffset","constrain","PxToPercent","viewInPx","totalPercent","ScrollBody","baseMass","roundToTwoDecimals","velocity","acceleration","attraction","attractionDirection","speed","mass","update","applyForce","v","seek","magnitude","m","settle","diffRounded","hasSettled","useMass","useBaseSpeed","ScrollBounds","pullBackThreshold","disabled","shouldConstrain","friction","diffToTarget","toggleActive","ScrollContain","alignment","contentSize","scrollBounds","alignedWithinView","contentExceedsView","findDuplicates","scrollSnaps","startSnap","endSnap","lastIndexOf","trim","containedSnaps","ScrollLimit","ScrollLooper","shouldLoop","vectors","loopDistance","forEach","ScrollProgress","scrollLength","ScrollSnap","snapSizes","alignments","distancesBetween","distancesBetweenScrollSnaps","sizes","reduce","a","s","ScrollTarget","minDistance","d1","d2","findTargetSnap","ascDiffsToSnaps","scrollSnap","diffToSnap","shortcut","t1","t2","t3","shortest","findTargetIndex","reachedBound","snap","targetSnap","snapDistance","ScrollTo","indexCurrent","indexPrevious","targetDistance","distanceDiff","indexDiff","targetIndex","SlideLooper","scrollLocation","slidesInView","slideSizes","ascItems","descItems","reverse","loopPoints","startPoints","concat","endPoints","loopStyle","removeSlideSizes","indexes","from","slidesInGap","gap","remainingGap","findLoopPoints","edge","isStartEdge","offset","slideBounds","findSlideBounds","initial","altered","bounds","b","getTarget","canLoop","every","otherIndexes","slides","loopPoint","style","clear","SlideFocus","slidesToScroll","eventStore","lastTabPressTime","registerTabPress","event","keyCode","addFocusEvent","slide","focus","scrollLeft","selectedIndex","floor","SlidesInView","inViewThreshold","threshold","offsets","loopOffset","span","thresholds","check","list","slideBound","inList","inView","Translate","container","containerStyle","translate","to","getComputedStyle","transform","Engine","contentDirection","startIndex","containScroll","slideIndexes","groupedSizes","g","defaultSnaps","contain","shouldContain","trimSnaps","scrollLimit","indexMax","indexSpan","engine","dragHandler","settled","scrollLooper","loopVectors","slideLooper","startLocation","scrollProgress","slideFocus","EventEmitter","getListeners","eventListeners","e","on","off","defaultOptions","containerSelector","draggable","draggableClass","draggingClass","selectedClass","EmblaCarousel","sliderRoot","userOptions","debouncedResize","resize","reInit","reActivate","activated","rootElementSize","activate","storeElements","Error","selector","sliderContainer","querySelector","Array","prototype","call","children","partialOptions","deActivate","toggleDraggingClass","toggleSelectedClass","notInView","slidesNotInView","selectedScrollSnap","newOptions","destroy","newRootElementSize","scrollNext","scrollPrev","prev","canScrollNext","canScrollPrev","scrollSnapList","previousScrollSnap","dangerouslyGetEngine","containerNode","slideNodes","setupPrevNextBtns","prevBtn","nextBtn","embla","disablePrevNextBtns","removeAttribute","setAttribute","PARALLAX_FACTOR","parallax","layers","applyParallaxStyles","wrap","viewPort","disablePrevAndNextBtns","bundleURL","getBundleURLCached","getBundleURL","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","href","split","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","querySelectorAll","module","OVERLAY_ID","OldModule","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","generated","js","console","hmrApply","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","overlay","createErrorOverlay","body","appendChild","getElementById","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","isArray","Function","deps","cached","cache","some"],"mappings":"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","file":"blogpost1-gallery.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export type AlignmentOption = 'start' | 'center' | 'end' | number\n\ntype Params = {\n  viewSize: number\n  align: AlignmentOption\n}\n\nexport type Alignment = {\n  measure: (n: number) => number\n}\n\nexport function Alignment(params: Params): Alignment {\n  const { viewSize, align } = params\n  const predefined = { start, center, end }\n\n  function start(): number {\n    return 0\n  }\n\n  function center(n: number): number {\n    return end(n) / 2\n  }\n\n  function end(n: number): number {\n    return viewSize - n\n  }\n\n  function percent(): number {\n    return viewSize * Number(align)\n  }\n\n  function measure(n: number): number {\n    if (typeof align === 'number') return percent()\n    return predefined[align](n)\n  }\n\n  const self: Alignment = {\n    measure,\n  }\n  return self\n}\n","type Callback = () => void\n\nexport type Animation = {\n  start: () => void\n  stop: () => void\n  proceed: () => void\n}\n\nexport function Animation(callback: FrameRequestCallback): Animation {\n  let animationFrame = 0\n\n  function ifAnimating(active: boolean, cb: Callback): Callback {\n    return (): void => {\n      if (active === !!animationFrame) cb()\n    }\n  }\n\n  function start(): void {\n    animationFrame = window.requestAnimationFrame(callback)\n  }\n\n  function stop(): void {\n    window.cancelAnimationFrame(animationFrame)\n    animationFrame = 0\n  }\n\n  const self: Animation = {\n    proceed: ifAnimating(true, start),\n    start: ifAnimating(false, start),\n    stop: ifAnimating(true, stop),\n  }\n  return self\n}\n","export type AxisOption = 'x' | 'y'\n\nexport type Axis = {\n  cross: AxisOption\n  scroll: AxisOption\n  measure: (node: HTMLElement) => number\n}\n\nexport function Axis(axis: AxisOption): Axis {\n  const scroll = axis === 'y' ? 'y' : 'x'\n  const cross = axis === 'y' ? 'x' : 'y'\n\n  function measure(node: HTMLElement): number {\n    const { width, height } = node.getBoundingClientRect()\n    return scroll === 'x' ? width : height\n  }\n\n  const self: Axis = {\n    cross,\n    measure,\n    scroll,\n  }\n  return self\n}\n","export function map(\n  value: number,\n  iStart: number,\n  iStop: number,\n  oStart: number,\n  oStop: number,\n): number {\n  return oStart + (oStop - oStart) * ((value - iStart) / (iStop - iStart))\n}\n\nexport function mathSign(n: number): number {\n  return !n ? 0 : n / Math.abs(n)\n}\n\nexport function deltaAbs(valueB: number, valueA: number): number {\n  return Math.abs(valueB - valueA)\n}\n\nexport function factorAbs(valueB: number, valueA: number): number {\n  if (valueB === 0 || valueA === 0) return 0\n  if (Math.abs(valueB) <= Math.abs(valueA)) return 0\n  const diff = deltaAbs(Math.abs(valueB), Math.abs(valueA))\n  return Math.abs(diff / valueB)\n}\n\nexport function roundToDecimals(decimalPoints: number): (n: number) => number {\n  const pow = Math.pow(10, decimalPoints)\n  return (n: number): number => Math.round(n * pow) / pow\n}\n\nexport function debounce(callback: () => void, time: number): () => void {\n  let timeout = 0\n  return (): void => {\n    window.clearTimeout(timeout)\n    timeout = window.setTimeout(callback, time) || 0\n  }\n}\n\nexport function groupArray<GenericType>(\n  array: GenericType[],\n  size: number,\n): GenericType[][] {\n  const groups = []\n  for (let i = 0; i < array.length; i += size) {\n    groups.push(array.slice(i, i + size))\n  }\n  return groups\n}\n\nexport function arrayKeys<GenericType>(array: GenericType): number[] {\n  return Object.keys(array).map(Number)\n}\n\nexport function removeClass(node: HTMLElement, className: string): void {\n  const cl = node.classList\n  if (className && cl.contains(className)) cl.remove(className)\n}\n\nexport function addClass(node: HTMLElement, className: string): void {\n  const cl = node.classList\n  if (className && !cl.contains(className)) cl.add(className)\n}\n","import { Limit } from './limit'\nimport { mathSign } from './utils'\n\ntype Params = {\n  start: number\n  limit: Limit\n  loop: boolean\n}\n\nexport type Counter = {\n  min: number\n  max: number\n  get: () => number\n  set: (n: number) => Counter\n  add: (n: number) => Counter\n  clone: () => Counter\n}\n\nexport function Counter(params: Params): Counter {\n  const { start, limit, loop } = params\n  const { min, max } = limit\n  const type = loop ? 'loop' : 'constrain'\n  const withinLimit = limit[type]\n  let counter = withinLimit(start)\n\n  function get(): number {\n    return counter\n  }\n\n  function set(n: number): Counter {\n    counter = withinLimit(n)\n    return self\n  }\n\n  function add(n: number): Counter {\n    if (n !== 0) {\n      const sign = mathSign(n)\n      set(get() + sign)\n      return add(n + sign * -1)\n    }\n    return self\n  }\n\n  function clone(): Counter {\n    return Counter({ start: get(), limit, loop })\n  }\n\n  const self: Counter = {\n    add,\n    clone,\n    get,\n    max,\n    min,\n    set,\n  }\n  return self\n}\n","export type DirectionOption = 'ltr' | 'rtl'\n\nexport type Direction = {\n  applyTo: (n: number) => number\n}\n\nexport function Direction(direction: DirectionOption): Direction {\n  const sign = direction === 'rtl' ? -1 : 1\n\n  function applyTo(n: number): number {\n    return n * sign\n  }\n\n  const self: Direction = {\n    applyTo,\n  }\n  return self\n}\n","type EventRemover = () => void\ntype EventHandler = EventListener | EventListenerObject | null\ntype EventOptions = boolean | AddEventListenerOptions | undefined\n\nexport type EventStore = {\n  add: (\n    node: EventTarget,\n    type: string,\n    handler: EventHandler,\n    options?: EventOptions,\n  ) => EventStore\n  removeAll: () => EventStore\n}\n\nexport function EventStore(): EventStore {\n  let listeners: EventRemover[] = []\n\n  function add(\n    node: EventTarget,\n    type: string,\n    handler: EventHandler,\n    options: EventOptions = false,\n  ): EventStore {\n    node.addEventListener(type, handler, options)\n    listeners.push(() => {\n      return node.removeEventListener(type, handler, options)\n    })\n    return self\n  }\n\n  function removeAll(): EventStore {\n    listeners = listeners.filter(remove => remove())\n    return self\n  }\n\n  const self: EventStore = {\n    add,\n    removeAll,\n  }\n  return self\n}\n","export type Vector1D = {\n  get: () => number\n  set: (v: Vector1D | number) => Vector1D\n  add: (v: Vector1D | number) => Vector1D\n  subtract: (v: Vector1D | number) => Vector1D\n  multiply: (n: number) => Vector1D\n  divide: (n: number) => Vector1D\n  normalize: () => Vector1D\n}\n\nexport function Vector1D(value: number): Vector1D {\n  let vector = value\n\n  function get(): number {\n    return vector\n  }\n\n  function set(n: Vector1D | number): Vector1D {\n    vector = readNumber(n)\n    return self\n  }\n\n  function add(n: Vector1D | number): Vector1D {\n    vector += readNumber(n)\n    return self\n  }\n\n  function subtract(n: Vector1D | number): Vector1D {\n    vector -= readNumber(n)\n    return self\n  }\n\n  function multiply(n: number): Vector1D {\n    vector *= n\n    return self\n  }\n\n  function divide(n: number): Vector1D {\n    vector /= n\n    return self\n  }\n\n  function normalize(): Vector1D {\n    if (vector !== 0) divide(vector)\n    return self\n  }\n\n  function readNumber(n: Vector1D | number): number {\n    return typeof n === 'number' ? n : n.get()\n  }\n\n  const self: Vector1D = {\n    add,\n    divide,\n    get,\n    multiply,\n    normalize,\n    set,\n    subtract,\n  }\n  return self\n}\n","import { Animation } from './animation'\nimport { Counter } from './counter'\nimport { Direction } from './direction'\nimport { DragTracker } from './dragTracker'\nimport { EventEmitter } from './eventEmitter'\nimport { Axis } from './axis'\nimport { EventStore } from './eventStore'\nimport { Limit } from './limit'\nimport { ScrollBody } from './scrollBody'\nimport { ScrollTarget } from './scrollTarget'\nimport { ScrollTo } from './scrollTo'\nimport { Vector1D } from './vector1d'\nimport { deltaAbs, factorAbs, mathSign } from './utils'\n\ntype Params = {\n  axis: Axis\n  direction: Direction\n  root: HTMLElement\n  target: Vector1D\n  dragFree: boolean\n  dragTracker: DragTracker\n  location: Vector1D\n  animation: Animation\n  scrollTo: ScrollTo\n  scrollBody: ScrollBody\n  scrollTarget: ScrollTarget\n  index: Counter\n  limit: Limit\n  events: EventEmitter\n}\n\nexport type DragHandler = {\n  addActivationEvents: () => void\n  clickAllowed: () => boolean\n  pointerDown: () => boolean\n  removeAllEvents: () => void\n}\n\nexport function DragHandler(params: Params): DragHandler {\n  const { target, scrollBody, dragFree, animation, axis, scrollTo } = params\n  const { root, dragTracker, location, events, limit, direction } = params\n  const { scroll: scrollAxis, cross: crossAxis } = axis\n  const focusNodes = ['INPUT', 'SELECT', 'TEXTAREA']\n  const startScroll = Vector1D(0)\n  const startCross = Vector1D(0)\n  const dragStartPoint = Vector1D(0)\n  const activationEvents = EventStore()\n  const interactionEvents = EventStore()\n  const snapForceBoost = { mouse: 2.5, touch: 3.5 }\n  const freeForceBoost = { mouse: 5, touch: 7 }\n  const baseSpeed = dragFree ? 5 : 12\n  const dragThreshold = 4\n\n  let pointerIsDown = false\n  let preventScroll = false\n  let preventClick = false\n  let isMouse = false\n\n  function addActivationEvents(): void {\n    const node = root\n    activationEvents\n      .add(node, 'touchmove', () => undefined)\n      .add(node, 'touchend', () => undefined)\n      .add(node, 'touchstart', down)\n      .add(node, 'mousedown', down)\n      .add(node, 'touchcancel', up)\n      .add(node, 'contextmenu', up)\n      .add(node, 'click', click)\n  }\n\n  function addInteractionEvents(): void {\n    const node = !isMouse ? root : document\n    interactionEvents\n      .add(node, 'touchmove', move)\n      .add(node, 'touchend', up)\n      .add(node, 'mousemove', move)\n      .add(node, 'mouseup', up)\n  }\n\n  function removeAllEvents(): void {\n    activationEvents.removeAll()\n    interactionEvents.removeAll()\n  }\n\n  function isFocusNode(node: Element): boolean {\n    const name = node.nodeName || ''\n    return focusNodes.indexOf(name) > -1\n  }\n\n  function forceBoost(): number {\n    const boost = dragFree ? freeForceBoost : snapForceBoost\n    const type = isMouse ? 'mouse' : 'touch'\n    return boost[type]\n  }\n\n  function allowedForce(force: number): number {\n    const { scrollTarget, index } = params\n    const currentLocation = scrollTarget.byDistance(0, false)\n    const targetChanged = currentLocation.index !== index.get()\n    const seekNext = !targetChanged && Math.abs(force) > dragThreshold\n    const destination = force + location.get()\n\n    if (seekNext && !dragFree && !limit.reachedAny(destination)) {\n      const next = index.clone().add(mathSign(force) * -1)\n      return scrollTarget.byIndex(next.get(), 0).distance\n    }\n    return scrollTarget.byDistance(force, !dragFree).distance\n  }\n\n  function down(evt: Event): void {\n    isMouse = evt.type === 'mousedown'\n    if (isMouse && (evt as MouseEvent).button !== 0) return\n\n    const isMoving = deltaAbs(target.get(), location.get()) >= 2\n    const clearPreventClick = isMouse || !isMoving\n    const isNotFocusNode = !isFocusNode(evt.target as Element)\n    const preventDefault = isMoving || (isMouse && isNotFocusNode)\n\n    pointerIsDown = true\n    dragTracker.pointerDown(evt)\n    dragStartPoint.set(target)\n    target.set(location)\n    scrollBody.useBaseMass().useSpeed(80)\n    addInteractionEvents()\n    startScroll.set(dragTracker.readPoint(evt, scrollAxis))\n    startCross.set(dragTracker.readPoint(evt, crossAxis))\n    events.emit('pointerDown')\n\n    if (clearPreventClick) preventClick = false\n    if (preventDefault) evt.preventDefault()\n  }\n\n  function move(evt: Event): void {\n    if (!preventScroll && !isMouse) {\n      if (!evt.cancelable) return up()\n      const moveScroll = dragTracker.readPoint(evt, scrollAxis).get()\n      const moveCross = dragTracker.readPoint(evt, crossAxis).get()\n      const diffScroll = deltaAbs(moveScroll, startScroll.get())\n      const diffCross = deltaAbs(moveCross, startCross.get())\n      preventScroll = diffScroll > diffCross\n      if (!preventScroll && !preventClick) return up()\n    }\n    const diff = dragTracker.pointerMove(evt)\n    if (!preventClick && diff) preventClick = true\n    animation.start()\n    target.add(direction.applyTo(diff))\n    evt.preventDefault()\n  }\n\n  function up(): void {\n    const rawForce = dragTracker.pointerUp() * forceBoost()\n    const force = allowedForce(direction.applyTo(rawForce))\n    const speedFactor = factorAbs(rawForce, force)\n    const isMoving = deltaAbs(target.get(), dragStartPoint.get()) >= 0.5\n\n    if (isMoving && !isMouse) preventClick = true\n    preventScroll = false\n    pointerIsDown = false\n    interactionEvents.removeAll()\n    scrollBody.useSpeed(baseSpeed + baseSpeed * speedFactor)\n    scrollTo.distance(force, !dragFree)\n    isMouse = false\n    events.emit('pointerUp')\n  }\n\n  function click(evt: Event): void {\n    if (preventClick) evt.preventDefault()\n  }\n\n  function clickAllowed(): boolean {\n    return !preventClick\n  }\n\n  function pointerDown(): boolean {\n    return pointerIsDown\n  }\n\n  const self: DragHandler = {\n    addActivationEvents,\n    clickAllowed,\n    pointerDown,\n    removeAllEvents,\n  }\n  return self\n}\n","import { Axis, AxisOption } from './axis'\nimport { PxToPercent } from './pxToPercent'\nimport { Vector1D } from './vector1d'\n\ntype Params = {\n  axis: Axis\n  pxToPercent: PxToPercent\n}\n\nexport type DragTracker = {\n  pointerDown: (evt: Event) => number\n  pointerMove: (evt: Event) => number\n  pointerUp: () => number\n  readPoint: (evt: any, axis: AxisOption) => Vector1D\n}\n\nexport function DragTracker(params: Params): DragTracker {\n  const { axis, pxToPercent } = params\n  const { scroll: scrollAxis } = axis\n  const coords = { x: 'clientX', y: 'clientY' }\n  const startDrag = Vector1D(0)\n  const diffDrag = Vector1D(0)\n  const lastDrag = Vector1D(0)\n  const pointValue = Vector1D(0)\n  const trackInterval = 10\n  const trackLength = 5\n  const trackTime = 100\n  let trackPoints: number[] = []\n  let lastMoveTime = new Date().getTime()\n  let isMouse = false\n\n  function readPoint(evt: any, type: AxisOption): Vector1D {\n    isMouse = !evt.touches\n    const c = coords[type]\n    const value = isMouse ? evt[c] : evt.touches[0][c]\n    return pointValue.set(value)\n  }\n\n  function pointerDown(evt: Event): number {\n    const point = readPoint(evt, scrollAxis)\n    startDrag.set(point)\n    lastDrag.set(point)\n    return pxToPercent.measure(startDrag.get())\n  }\n\n  function pointerMove(evt: Event): number {\n    const point = readPoint(evt, scrollAxis)\n    const nowTime = new Date().getTime()\n    const diffTime = nowTime - lastMoveTime\n\n    if (diffTime >= trackInterval) {\n      if (diffTime >= trackTime) trackPoints = []\n      trackPoints.push(point.get())\n      lastMoveTime = nowTime\n    }\n\n    diffDrag.set(point).subtract(lastDrag)\n    lastDrag.set(point)\n    return pxToPercent.measure(diffDrag.get())\n  }\n\n  function pointerUp(): number {\n    const nowTime = new Date().getTime()\n    const diffTime = nowTime - lastMoveTime\n    const currentPoint = lastDrag.get()\n\n    const force = trackPoints\n      .slice(-trackLength)\n      .map(trackPoint => currentPoint - trackPoint)\n      .sort((p1, p2) => (Math.abs(p1) < Math.abs(p2) ? 1 : -1))[0]\n\n    lastDrag.set(diffTime > trackTime || !force ? 0 : force)\n    trackPoints = []\n    return pxToPercent.measure(lastDrag.get())\n  }\n\n  const self: DragTracker = {\n    pointerDown,\n    pointerMove,\n    pointerUp,\n    readPoint,\n  }\n  return self\n}\n","type Params = {\n  min: number\n  max: number\n}\n\nexport type Limit = {\n  min: number\n  max: number\n  length: number\n  loop: (n: number) => number\n  constrain: (n: number) => number\n  reachedAny: (n: number) => boolean\n  reachedMax: (n: number) => boolean\n  reachedMin: (n: number) => boolean\n  removeOffset: (n: number) => number\n}\n\nexport function Limit(params: Params): Limit {\n  const { min, max } = params\n  const length = Math.abs(min - max)\n\n  function reachedMin(n: number): boolean {\n    return n < min\n  }\n\n  function reachedMax(n: number): boolean {\n    return n > max\n  }\n\n  function reachedAny(n: number): boolean {\n    return reachedMin(n) || reachedMax(n)\n  }\n\n  function removeOffset(n: number): number {\n    if (min === max) return n\n    while (reachedMin(n)) n += length\n    while (reachedMax(n)) n -= length\n    return n\n  }\n\n  function loop(n: number): number {\n    if (!reachedAny(n)) return n\n    return reachedMin(n) ? max : min\n  }\n\n  function constrain(n: number): number {\n    if (!reachedAny(n)) return n\n    return reachedMin(n) ? min : max\n  }\n\n  const self: Limit = {\n    constrain,\n    length,\n    loop,\n    max,\n    min,\n    reachedAny,\n    reachedMax,\n    reachedMin,\n    removeOffset,\n  }\n  return self\n}\n","export type PxToPercent = {\n  measure: (n: number) => number\n  totalPercent: number\n}\n\nexport function PxToPercent(viewInPx: number): PxToPercent {\n  const totalPercent = 100\n\n  function measure(n: number): number {\n    return (n / viewInPx) * totalPercent\n  }\n\n  const self: PxToPercent = {\n    measure,\n    totalPercent,\n  }\n  return self\n}\n","import { map, roundToDecimals, mathSign } from './utils'\nimport { Vector1D } from './vector1d'\n\ntype Params = {\n  location: Vector1D\n  speed: number\n  mass: number\n}\n\nexport type ScrollBody = {\n  direction: () => number\n  seek: (v: Vector1D) => ScrollBody\n  settle: (v: Vector1D) => boolean\n  update: () => void\n  useBaseMass: () => ScrollBody\n  useBaseSpeed: () => ScrollBody\n  useMass: (n: number) => ScrollBody\n  useSpeed: (n: number) => ScrollBody\n}\n\nexport function ScrollBody(params: Params): ScrollBody {\n  const { location, speed: baseSpeed, mass: baseMass } = params\n  const roundToTwoDecimals = roundToDecimals(2)\n  const velocity = Vector1D(0)\n  const acceleration = Vector1D(0)\n  const attraction = Vector1D(0)\n\n  let attractionDirection = 0\n  let speed = baseSpeed\n  let mass = baseMass\n\n  function update(): void {\n    velocity.add(acceleration)\n    location.add(velocity)\n    acceleration.multiply(0)\n  }\n\n  function applyForce(v: Vector1D): void {\n    v.divide(mass)\n    acceleration.add(v)\n  }\n\n  function seek(v: Vector1D): ScrollBody {\n    attraction.set(v).subtract(location)\n    const magnitude = attraction.get()\n    const m = map(magnitude, 0, 100, 0, speed)\n    attractionDirection = mathSign(attraction.get())\n    attraction\n      .normalize()\n      .multiply(m)\n      .subtract(velocity)\n    applyForce(attraction)\n    return self\n  }\n\n  function settle(v: Vector1D): boolean {\n    const diff = v.get() - location.get()\n    const diffRounded = roundToTwoDecimals(diff)\n    const hasSettled = !diffRounded\n    if (hasSettled) location.set(v)\n    return hasSettled\n  }\n\n  function direction(): number {\n    return attractionDirection\n  }\n\n  function useSpeed(n: number): ScrollBody {\n    speed = n\n    return self\n  }\n\n  function useMass(n: number): ScrollBody {\n    mass = n\n    return self\n  }\n\n  function useBaseSpeed(): ScrollBody {\n    return useSpeed(baseSpeed)\n  }\n\n  function useBaseMass(): ScrollBody {\n    return useMass(baseMass)\n  }\n\n  const self: ScrollBody = {\n    direction,\n    seek,\n    settle,\n    update,\n    useBaseMass,\n    useBaseSpeed,\n    useMass,\n    useSpeed,\n  }\n  return self\n}\n","import { Limit } from './limit'\nimport { ScrollBody } from './scrollBody'\nimport { Vector1D } from './vector1d'\n\ntype Params = {\n  limit: Limit\n  location: Vector1D\n  scrollBody: ScrollBody\n}\n\nexport type ScrollBounds = {\n  constrain: (v: Vector1D, pointerDown: boolean) => void\n  toggleActive: (active: boolean) => void\n}\n\nexport function ScrollBounds(params: Params): ScrollBounds {\n  const { limit, location, scrollBody } = params\n  const pullBackThreshold = 10\n  let disabled = false\n\n  function shouldConstrain(target: Vector1D): boolean {\n    if (disabled) return false\n    if (!limit.reachedAny(target.get())) return false\n    if (!limit.reachedAny(location.get())) return false\n    return true\n  }\n\n  function constrain(target: Vector1D, pointerDown: boolean): void {\n    if (!shouldConstrain(target)) return\n    const friction = pointerDown ? 0.7 : 0.4\n    const diffToTarget = target.get() - location.get()\n\n    target.subtract(diffToTarget * friction)\n\n    if (!pointerDown && Math.abs(diffToTarget) < pullBackThreshold) {\n      target.set(limit.constrain(target.get()))\n      scrollBody.useSpeed(10).useMass(3)\n    }\n  }\n\n  function toggleActive(active: boolean): void {\n    disabled = !active\n  }\n\n  const self: ScrollBounds = {\n    constrain,\n    toggleActive,\n  }\n  return self\n}\n","import { Alignment } from './alignment'\nimport { Limit } from './limit'\n\nexport type ScrollContainOption = '' | 'trimSnaps' | 'keepSnaps'\n\ntype Params = {\n  contentSize: number\n  viewSize: number\n  alignment: Alignment\n}\n\nexport type ScrollContain = {\n  measure: (scrollSnaps: number[], trim: boolean) => number[]\n}\n\nexport function ScrollContain(params: Params): ScrollContain {\n  const { alignment, contentSize, viewSize } = params\n  const scrollBounds = Limit({ min: -contentSize + viewSize, max: 0 })\n  const alignedWithinView = [alignment.measure(contentSize)]\n  const contentExceedsView = contentSize > viewSize\n\n  function findDuplicates(scrollSnaps: number[]): Limit {\n    const startSnap = scrollSnaps[0]\n    const endSnap = scrollSnaps[scrollSnaps.length - 1]\n    const min = scrollSnaps.lastIndexOf(startSnap) + 1\n    const max = scrollSnaps.indexOf(endSnap)\n    return Limit({ min, max })\n  }\n\n  function measure(scrollSnaps: number[], trim: boolean): number[] {\n    const containedSnaps = scrollSnaps.map(scrollBounds.constrain)\n    const { min, max } = findDuplicates(containedSnaps)\n\n    if (!contentExceedsView) return alignedWithinView\n    if (!trim) return containedSnaps\n    return containedSnaps.slice(min - 1, max + 1)\n  }\n\n  const self: ScrollContain = {\n    measure,\n  }\n  return self\n}\n","import { Limit } from './limit'\n\ntype Params = {\n  contentSize: number\n  loop: boolean\n}\n\nexport type ScrollLimit = {\n  measure: (scrollSnaps: number[]) => Limit\n}\n\nexport function ScrollLimit(params: Params): ScrollLimit {\n  const { contentSize, loop } = params\n\n  function measure(scrollSnaps: number[]): Limit {\n    const startSnap = scrollSnaps[0]\n    const endSnap = scrollSnaps[scrollSnaps.length - 1]\n    const min = loop ? startSnap - contentSize : endSnap\n    const max = startSnap\n    return Limit({ min, max })\n  }\n\n  const self: ScrollLimit = {\n    measure,\n  }\n  return self\n}\n","import { Limit } from './limit'\nimport { PxToPercent } from './pxToPercent'\nimport { Vector1D } from './vector1d'\n\ntype Params = {\n  contentSize: number\n  limit: Limit\n  location: Vector1D\n  pxToPercent: PxToPercent\n}\n\nexport type ScrollLooper = {\n  loop: (vectors: Vector1D[], direction: number) => void\n}\n\nexport function ScrollLooper(params: Params): ScrollLooper {\n  const { contentSize, location, limit, pxToPercent } = params\n  const min = limit.min + pxToPercent.measure(0.1)\n  const max = limit.max + pxToPercent.measure(0.1)\n  const { reachedMin, reachedMax } = Limit({ min, max })\n\n  function shouldLoop(direction: number): boolean {\n    if (direction === 1) return reachedMax(location.get())\n    if (direction === -1) return reachedMin(location.get())\n    return false\n  }\n\n  function loop(vectors: Vector1D[], direction: number): void {\n    if (!shouldLoop(direction)) return\n\n    const loopDistance = contentSize * (direction * -1)\n    vectors.forEach(v => v.add(loopDistance))\n  }\n\n  const self: ScrollLooper = {\n    loop,\n  }\n  return self\n}\n","import { Limit } from './limit'\r\n\r\ntype Params = {\r\n  limit: Limit\r\n}\r\n\r\nexport type ScrollProgress = {\r\n  get: (n: number) => number\r\n}\r\n\r\nexport function ScrollProgress(params: Params): ScrollProgress {\r\n  const { max, length: scrollLength } = params.limit\r\n\r\n  function get(n: number): number {\r\n    const currentLocation = n - max\r\n    return currentLocation / -scrollLength\r\n  }\r\n\r\n  const self: ScrollProgress = {\r\n    get,\r\n  }\r\n  return self\r\n}\r\n","import { Alignment } from './alignment'\nimport { Counter } from './counter'\nimport { Limit } from './limit'\n\ntype Params = {\n  snapSizes: number[]\n  alignment: Alignment\n  loop: boolean\n}\n\nexport type ScrollSnap = {\n  measure: (index: number) => number\n}\n\nexport function ScrollSnap(params: Params): ScrollSnap {\n  const { snapSizes, alignment, loop } = params\n  const alignments = snapSizes.map(alignment.measure)\n  const distancesBetween = distancesBetweenScrollSnaps()\n\n  function distancesBetweenScrollSnaps(): number[] {\n    const limit = Limit({ min: 0, max: snapSizes.length - 1 })\n    const counter = Counter({ limit, start: 0, loop })\n\n    return snapSizes.map((size, index) => {\n      const next = counter.set(index + 1).get()\n      return size + alignments[index] - alignments[next]\n    })\n  }\n\n  function measure(index: number): number {\n    const sizes = distancesBetween.slice(0, index)\n    return sizes.reduce((a, s) => a - s, alignments[0])\n  }\n\n  const self: ScrollSnap = {\n    measure,\n  }\n  return self\n}\n","import { Counter } from './counter'\nimport { Limit } from './limit'\nimport { Vector1D } from './vector1d'\n\ntype Params = {\n  index: Counter\n  loop: boolean\n  scrollSnaps: number[]\n  contentSize: number\n  limit: Limit\n  target: Vector1D\n}\n\nexport type Target = {\n  distance: number\n  index: number\n}\n\nexport type ScrollTarget = {\n  byIndex: (target: number, direction: number) => Target\n  byDistance: (force: number, snap: boolean) => Target\n  shortcut: (target: number, direction: number) => number\n}\n\nexport function ScrollTarget(params: Params): ScrollTarget {\n  const { loop, limit, scrollSnaps, contentSize } = params\n  const { reachedMax, reachedAny, removeOffset } = limit\n\n  function minDistance(d1: number, d2: number): number {\n    return Math.abs(d1) < Math.abs(d2) ? d1 : d2\n  }\n\n  function findTargetSnap(target: number): Target {\n    const distance = removeOffset(target)\n    const ascDiffsToSnaps = scrollSnaps\n      .map(scrollSnap => scrollSnap - distance)\n      .map(diffToSnap => shortcut(diffToSnap, 0))\n      .map((diff, i) => ({ diff, index: i }))\n      .sort((d1, d2) => Math.abs(d1.diff) - Math.abs(d2.diff))\n\n    const { index } = ascDiffsToSnaps[0]\n    return { index, distance }\n  }\n\n  function shortcut(target: number, direction: number): number {\n    const t1 = target\n    const t2 = target + contentSize\n    const t3 = target - contentSize\n\n    if (!loop) return t1\n    if (!direction) return minDistance(minDistance(t1, t2), t3)\n\n    const shortest = minDistance(t1, direction === 1 ? t2 : t3)\n    return Math.abs(shortest) * direction\n  }\n\n  function findTargetIndex(target: number, index: number): number {\n    const reachedBound = !loop && reachedAny(target)\n    if (!reachedBound) return index\n\n    const { min, max } = params.index\n    return reachedMax(target) ? min : max\n  }\n\n  function byIndex(index: number, direction: number): Target {\n    const diffToSnap = scrollSnaps[index] - params.target.get()\n    const distance = shortcut(diffToSnap, direction)\n    return { index, distance }\n  }\n\n  function byDistance(distance: number, snap: boolean): Target {\n    const target = params.target.get() + distance\n    const targetSnap = findTargetSnap(target)\n    const index = findTargetIndex(target, targetSnap.index)\n    const reachedBound = !loop && reachedAny(target)\n\n    if (!snap || reachedBound) return { index, distance }\n\n    const diffToSnap = scrollSnaps[index] - targetSnap.distance\n    const snapDistance = distance + shortcut(diffToSnap, 0)\n\n    return { index, distance: snapDistance }\n  }\n\n  const self: ScrollTarget = {\n    byDistance,\n    byIndex,\n    shortcut,\n  }\n  return self\n}\n","import { Animation } from './animation'\nimport { Counter } from './counter'\nimport { EventEmitter } from './eventEmitter'\nimport { ScrollTarget, Target } from './scrollTarget'\nimport { Vector1D } from './vector1d'\n\ntype Params = {\n  animation: Animation\n  target: Vector1D\n  index: Counter\n  indexPrevious: Counter\n  scrollTarget: ScrollTarget\n  events: EventEmitter\n}\n\nexport type ScrollTo = {\n  distance: (n: number, snap: boolean) => void\n  index: (n: number, direction: number) => void\n}\n\nexport function ScrollTo(params: Params): ScrollTo {\n  const { index: indexCurrent, scrollTarget, animation } = params\n  const { indexPrevious, events, target: targetDistance } = params\n\n  function scrollTo(target: Target): void {\n    const distanceDiff = target.distance\n    const indexDiff = target.index !== indexCurrent.get()\n\n    if (distanceDiff) {\n      animation.start()\n      targetDistance.add(distanceDiff)\n    }\n    if (indexDiff) {\n      indexPrevious.set(indexCurrent.get())\n      indexCurrent.set(target.index)\n      events.emit('select')\n    }\n  }\n\n  function distance(n: number, snap: boolean): void {\n    const target = scrollTarget.byDistance(n, snap)\n    scrollTo(target)\n  }\n\n  function index(n: number, direction: number): void {\n    const targetIndex = indexCurrent.clone().set(n)\n    const target = scrollTarget.byIndex(targetIndex.get(), direction)\n    scrollTo(target)\n  }\n\n  const self: ScrollTo = {\n    distance,\n    index,\n  }\n  return self\n}\n","import { Axis } from './axis'\nimport { arrayKeys } from './utils'\nimport { Direction } from './direction'\nimport { SlidesInView } from './slidesInView'\nimport { Vector1D } from './vector1d'\n\ntype Params = {\n  axis: Axis\n  direction: Direction\n  scrollSnaps: number[]\n  viewSize: number\n  location: Vector1D\n  slideSizes: number[]\n  contentSize: number\n  slidesInView: SlidesInView\n}\n\ntype LoopPoint = {\n  point: number\n  location: number\n  index: number\n  getTarget: () => number\n}\n\ntype LoopEdge = 'start' | 'end'\n\nexport type SlideLooper = {\n  canLoop: () => boolean\n  clear: (slides: HTMLElement[]) => void\n  loop: (slides: HTMLElement[]) => void\n  loopPoints: LoopPoint[]\n}\n\nexport function SlideLooper(params: Params): SlideLooper {\n  const { axis, location: scrollLocation, slidesInView, direction } = params\n  const { contentSize, viewSize, slideSizes, scrollSnaps } = params\n  const ascItems = arrayKeys(slideSizes)\n  const descItems = arrayKeys(slideSizes).reverse()\n  const loopPoints = startPoints().concat(endPoints())\n  const loopStyle = axis.scroll === 'x' ? 'left' : 'top'\n\n  function removeSlideSizes(indexes: number[], from: number): number {\n    return indexes.reduce((a: number, i) => {\n      return a - slideSizes[i]\n    }, from)\n  }\n\n  function slidesInGap(indexes: number[], gap: number): number[] {\n    return indexes.reduce((a: number[], i) => {\n      const remainingGap = removeSlideSizes(a, gap)\n      return remainingGap > 0 ? a.concat([i]) : a\n    }, [])\n  }\n\n  function findLoopPoints(indexes: number[], edge: LoopEdge): LoopPoint[] {\n    const isStartEdge = edge === 'start'\n    const offset = isStartEdge ? -contentSize : contentSize\n    const slideBounds = slidesInView.findSlideBounds(offset)\n\n    return indexes.map(index => {\n      const initial = isStartEdge ? 0 : -contentSize\n      const altered = isStartEdge ? contentSize : 0\n      const bounds = slideBounds.filter(b => b.index === index)[0]\n      const point = bounds[isStartEdge ? 'end' : 'start']\n      const getTarget = (): number =>\n        scrollLocation.get() > point ? initial : altered\n      return { point, getTarget, index, location: -1 }\n    })\n  }\n\n  function startPoints(): LoopPoint[] {\n    const gap = scrollSnaps[0] - 1\n    const indexes = slidesInGap(descItems, gap)\n    return findLoopPoints(indexes, 'end')\n  }\n\n  function endPoints(): LoopPoint[] {\n    const gap = viewSize - scrollSnaps[0] - 1\n    const indexes = slidesInGap(ascItems, gap)\n    return findLoopPoints(indexes, 'start')\n  }\n\n  function canLoop(): boolean {\n    return loopPoints.every(({ index }) => {\n      const otherIndexes = ascItems.filter(i => i !== index)\n      return removeSlideSizes(otherIndexes, viewSize) <= 0\n    })\n  }\n\n  function loop(slides: HTMLElement[]): void {\n    loopPoints.forEach(loopPoint => {\n      const { getTarget, location, index } = loopPoint\n      const target = getTarget()\n      if (target !== location) {\n        slides[index].style[loopStyle] = `${direction.applyTo(target)}%`\n        loopPoint.location = target\n      }\n    })\n  }\n\n  function clear(slides: HTMLElement[]): void {\n    loopPoints.forEach(({ index }) => {\n      slides[index].style[loopStyle] = ''\n    })\n  }\n\n  const self: SlideLooper = {\n    canLoop,\n    clear,\n    loop,\n    loopPoints,\n  }\n  return self\n}\n","import { EventStore } from './eventStore'\nimport { ScrollTo } from './scrollTo'\n\ntype Params = {\n  root: HTMLElement\n  scrollTo: ScrollTo\n  slidesToScroll: number\n}\n\nexport type SlideFocus = {\n  addActivationEvents: (slides: HTMLElement[]) => void\n  removeAllEvents: EventStore['removeAll']\n}\n\nexport function SlideFocus(params: Params): SlideFocus {\n  const { scrollTo, slidesToScroll, root } = params\n  const eventStore = EventStore()\n  const removeAllEvents = eventStore.removeAll\n  let lastTabPressTime = 0\n\n  function registerTabPress(event: Event): void {\n    if ((event as KeyboardEvent).keyCode !== 9) return\n    lastTabPressTime = new Date().getTime()\n  }\n\n  function addFocusEvent(slide: HTMLElement, index: number): void {\n    const focus = (): void => {\n      const nowTime = new Date().getTime()\n      const diffTime = nowTime - lastTabPressTime\n      if (diffTime > 10) return\n\n      root.scrollLeft = 0\n      const selectedIndex = Math.floor(index / slidesToScroll)\n      scrollTo.index(selectedIndex, 0)\n    }\n    eventStore.add(slide, 'focus', focus, true)\n  }\n\n  function addActivationEvents(slides: HTMLElement[]): void {\n    eventStore.add(document, 'keydown', registerTabPress, false)\n    slides.forEach(addFocusEvent)\n  }\n\n  const self: SlideFocus = {\n    addActivationEvents,\n    removeAllEvents,\n  }\n  return self\n}\n","import { arrayKeys } from './utils'\n\ntype Params = {\n  contentSize: number\n  slideSizes: number[]\n  viewSize: number\n  loop: boolean\n  inViewThreshold: number\n}\n\ntype SlideBound = {\n  start: number\n  end: number\n  index: number\n}\n\nexport type SlidesInView = {\n  check: (location: number) => number[]\n  findSlideBounds: (offset: number, threshold?: number) => SlideBound[]\n}\n\nexport function SlidesInView(params: Params): SlidesInView {\n  const { contentSize, slideSizes, viewSize } = params\n  const { inViewThreshold, loop } = params\n  const threshold = Math.min(Math.max(inViewThreshold, 0.01), 0.99)\n  const scrollSnaps = arrayKeys(slideSizes).map(scrollSnap)\n  const offsets = loop ? [0, contentSize, -contentSize] : [0]\n  const slideBounds = offsets.reduce((a: SlideBound[], loopOffset) => {\n    return a.concat(findSlideBounds(loopOffset, threshold))\n  }, [])\n\n  function scrollSnap(index: number): number {\n    const span = slideSizes.slice(0, index)\n    return span.reduce((a, s) => a - s, 0)\n  }\n\n  function findSlideBounds(offset: number, threshold?: number): SlideBound[] {\n    const thresholds = slideSizes.map(s => s * (threshold || 0))\n    return scrollSnaps.map((snap, index) => ({\n      start: snap - slideSizes[index] + thresholds[index] + offset,\n      end: snap + viewSize - thresholds[index] + offset,\n      index,\n    }))\n  }\n\n  function check(location: number): number[] {\n    return slideBounds.reduce((list: number[], slideBound) => {\n      const { index, start, end } = slideBound\n      const inList = list.indexOf(index) !== -1\n      const inView = start < location && end > location\n      return !inList && inView ? list.concat([index]) : list\n    }, [])\n  }\n\n  const self: SlidesInView = {\n    check,\n    findSlideBounds,\n  }\n  return self\n}\n","import { Axis } from './axis'\nimport { Direction } from './direction'\nimport { roundToDecimals } from './utils'\nimport { Vector1D } from './vector1d'\n\ntype Params = {\n  axis: Axis\n  container: HTMLElement\n  direction: Direction\n}\n\nexport type Translate = {\n  clear: () => void\n  to: (vector: Vector1D) => void\n  toggleActive: (active: boolean) => void\n}\n\nexport function Translate(params: Params): Translate {\n  const { axis, container, direction } = params\n  const containerStyle = container.style\n  const translate = axis.scroll === 'x' ? x : y\n  const roundToTwoDecimals = roundToDecimals(2)\n\n  let disabled = false\n  let location = 0\n\n  function x(n: number): string {\n    return `translate3d(${n}%,0px,0px)`\n  }\n\n  function y(n: number): string {\n    return `translate3d(0px,${n}%,0px)`\n  }\n\n  function to(v: Vector1D): void {\n    const target = roundToTwoDecimals(v.get())\n    if (disabled || location === target) return\n\n    getComputedStyle(container).transform\n    containerStyle.transform = translate(direction.applyTo(target))\n    location = target\n  }\n\n  function toggleActive(active: boolean): void {\n    disabled = !active\n  }\n\n  function clear(): void {\n    containerStyle.transform = ''\n    location = 0\n  }\n\n  const self: Translate = {\n    clear,\n    to,\n    toggleActive,\n  }\n  return self\n}\n","import { Alignment } from './alignment'\nimport { Animation } from './animation'\nimport { Axis } from './axis'\nimport { Counter } from './counter'\nimport { Direction } from './direction'\nimport { DragHandler } from './dragHandler'\nimport { DragTracker } from './dragTracker'\nimport { EventEmitter } from './eventEmitter'\nimport { Limit } from './limit'\nimport { Options } from './options'\nimport { PxToPercent } from './pxToPercent'\nimport { ScrollBody } from './scrollBody'\nimport { ScrollBounds } from './scrollBounds'\nimport { ScrollContain } from './scrollContain'\nimport { ScrollLimit } from './scrollLimit'\nimport { ScrollLooper } from './scrollLooper'\nimport { ScrollProgress } from './scrollProgress'\nimport { ScrollSnap } from './scrollSnap'\nimport { ScrollTarget } from './scrollTarget'\nimport { ScrollTo } from './scrollTo'\nimport { SlideLooper } from './slideLooper'\nimport { SlideFocus } from './slideFocus'\nimport { SlidesInView } from './slidesInView'\nimport { Translate } from './translate'\nimport { arrayKeys, groupArray } from './utils'\nimport { Vector1D } from './vector1d'\n\nexport type Engine = {\n  axis: Axis\n  direction: Direction\n  animation: Animation\n  scrollBounds: ScrollBounds\n  scrollLooper: ScrollLooper\n  scrollProgress: ScrollProgress\n  index: Counter\n  indexPrevious: Counter\n  limit: Limit\n  location: Vector1D\n  options: Options\n  pxToPercent: PxToPercent\n  scrollBody: ScrollBody\n  dragHandler: DragHandler\n  slideFocus: SlideFocus\n  slideLooper: SlideLooper\n  slidesInView: SlidesInView\n  target: Vector1D\n  translate: Translate\n  scrollTo: ScrollTo\n  scrollTarget: ScrollTarget\n  scrollSnaps: number[]\n  slideIndexes: number[]\n}\n\nexport function Engine(\n  root: HTMLElement,\n  container: HTMLElement,\n  slides: HTMLElement[],\n  options: Options,\n  events: EventEmitter,\n): Engine {\n  // Options\n  const {\n    align,\n    axis: scrollAxis,\n    direction: contentDirection,\n    startIndex,\n    inViewThreshold,\n    loop,\n    speed,\n    dragFree,\n    slidesToScroll,\n    containScroll,\n  } = options\n\n  // Measurements\n  const axis = Axis(scrollAxis)\n  const pxToPercent = PxToPercent(axis.measure(container))\n  const viewSize = pxToPercent.totalPercent\n  const slideSizes = slides.map(axis.measure).map(pxToPercent.measure)\n  const slideIndexes = arrayKeys(slideSizes)\n  const groupedSizes = groupArray(slideSizes, slidesToScroll)\n  const snapSizes = groupedSizes.map(g => g.reduce((a, s) => a + s))\n  const contentSize = slideSizes.reduce((a, s) => a + s, 0)\n  const alignment = Alignment({ align, viewSize })\n  const scrollSnap = ScrollSnap({ snapSizes, alignment, loop })\n  const defaultSnaps = arrayKeys(snapSizes).map(scrollSnap.measure)\n  const contain = ScrollContain({ alignment, contentSize, viewSize })\n  const shouldContain = !loop && containScroll !== ''\n  const trimSnaps = containScroll === 'trimSnaps'\n  const containedSnaps = contain.measure(defaultSnaps, trimSnaps)\n  const scrollSnaps = shouldContain ? containedSnaps : defaultSnaps\n  const scrollLimit = ScrollLimit({ loop, contentSize })\n  const limit = scrollLimit.measure(scrollSnaps)\n  const direction = Direction(contentDirection)\n\n  // Index\n  const indexMax = Math.max(0, scrollSnaps.length - 1)\n  const indexSpan = Limit({ min: 0, max: indexMax })\n  const index = Counter({ limit: indexSpan, start: startIndex, loop })\n  const indexPrevious = index.clone()\n\n  // Draw\n  const update = (): void => {\n    if (!loop) {\n      engine.scrollBounds.constrain(target, engine.dragHandler.pointerDown())\n    }\n    engine.scrollBody.seek(target).update()\n    const settled = engine.scrollBody.settle(target)\n\n    if (settled && !engine.dragHandler.pointerDown()) {\n      engine.animation.stop()\n      events.emit('settle')\n    }\n    if (!settled) {\n      events.emit('scroll')\n    }\n    if (loop) {\n      engine.scrollLooper.loop(loopVectors, engine.scrollBody.direction())\n      engine.slideLooper.loop(slides)\n    }\n\n    engine.translate.to(location)\n    engine.animation.proceed()\n  }\n\n  // Shared\n  const animation = Animation(update)\n  const startLocation = scrollSnaps[index.get()]\n  const location = Vector1D(startLocation)\n  const target = Vector1D(startLocation)\n  const loopVectors = [location, target]\n  const scrollBody = ScrollBody({\n    location,\n    speed,\n    mass: 1,\n  })\n  const scrollTarget = ScrollTarget({\n    contentSize,\n    index,\n    limit,\n    loop,\n    scrollSnaps,\n    target,\n  })\n  const scrollTo = ScrollTo({\n    animation,\n    events,\n    index,\n    indexPrevious,\n    scrollTarget,\n    target,\n  })\n  const slidesInView = SlidesInView({\n    contentSize,\n    inViewThreshold,\n    loop,\n    slideSizes,\n    viewSize,\n  })\n\n  // DragHandler\n  const dragHandler = DragHandler({\n    animation,\n    axis,\n    direction,\n    dragFree,\n    dragTracker: DragTracker({\n      axis,\n      pxToPercent,\n    }),\n    root,\n    events,\n    index,\n    limit,\n    location,\n    scrollBody,\n    scrollTo,\n    scrollTarget,\n    target,\n  })\n\n  // Slider\n  const engine: Engine = {\n    animation,\n    axis,\n    direction,\n    dragHandler,\n    pxToPercent,\n    index,\n    indexPrevious,\n    limit,\n    location,\n    options,\n    scrollBody,\n    scrollBounds: ScrollBounds({\n      limit,\n      location,\n      scrollBody,\n    }),\n    scrollLooper: ScrollLooper({\n      contentSize,\n      limit,\n      location,\n      pxToPercent,\n    }),\n    scrollProgress: ScrollProgress({\n      limit,\n    }),\n    scrollSnaps,\n    scrollTarget,\n    scrollTo,\n    slideFocus: SlideFocus({\n      root,\n      scrollTo,\n      slidesToScroll,\n    }),\n    slideLooper: SlideLooper({\n      axis,\n      contentSize,\n      direction,\n      location,\n      scrollSnaps,\n      slideSizes,\n      slidesInView,\n      viewSize,\n    }),\n    slidesInView,\n    slideIndexes,\n    target,\n    translate: Translate({\n      axis,\n      container,\n      direction,\n    }),\n  }\n  return engine\n}\n","type Callback = (evt: EmblaEvent) => void\ntype Listeners = Partial<{ [key in EmblaEvent]: Callback[] }>\n\nexport type EmblaEvent =\n  | 'init'\n  | 'pointerDown'\n  | 'pointerUp'\n  | 'scroll'\n  | 'select'\n  | 'settle'\n  | 'destroy'\n  | 'reInit'\n  | 'resize'\n\nexport type EventEmitter = {\n  emit: (evt: EmblaEvent) => EventEmitter\n  on: (evt: EmblaEvent, cb: Callback) => EventEmitter\n  off: (evt: EmblaEvent, cb: Callback) => EventEmitter\n}\n\nexport function EventEmitter(): EventEmitter {\n  const listeners: Listeners = {}\n\n  function getListeners(evt: EmblaEvent): Callback[] {\n    const eventListeners = listeners[evt]\n    return eventListeners || []\n  }\n\n  function emit(evt: EmblaEvent): EventEmitter {\n    getListeners(evt).forEach(e => e(evt))\n    return self\n  }\n\n  function on(evt: EmblaEvent, cb: Callback): EventEmitter {\n    listeners[evt] = getListeners(evt).concat([cb])\n    return self\n  }\n\n  function off(evt: EmblaEvent, cb: Callback): EventEmitter {\n    listeners[evt] = getListeners(evt).filter(e => e !== cb)\n    return self\n  }\n\n  const self: EventEmitter = {\n    emit,\n    off,\n    on,\n  }\n  return self\n}\n","import { AlignmentOption } from './alignment'\nimport { AxisOption } from './axis'\nimport { DirectionOption } from './direction'\nimport { ScrollContainOption } from './scrollContain'\n\nexport type Options = {\n  align: AlignmentOption\n  axis: AxisOption\n  containScroll: ScrollContainOption\n  containerSelector: string\n  direction: DirectionOption\n  dragFree: boolean\n  draggable: boolean\n  draggableClass: string\n  draggingClass: string\n  inViewThreshold: number\n  loop: boolean\n  selectedClass: string\n  slidesToScroll: number\n  speed: number\n  startIndex: number\n}\n\nexport const defaultOptions: Options = {\n  align: 'center',\n  axis: 'x',\n  containScroll: '',\n  containerSelector: '*',\n  direction: 'ltr',\n  dragFree: false,\n  draggable: true,\n  draggableClass: 'is-draggable',\n  draggingClass: 'is-dragging',\n  inViewThreshold: 0,\n  loop: false,\n  selectedClass: 'is-selected',\n  slidesToScroll: 1,\n  speed: 10,\n  startIndex: 0,\n}\n\nexport type EmblaOptions = Partial<Options>\n","import { Engine } from './components/engine'\nimport { EventEmitter, EmblaEvent } from './components/eventEmitter'\nimport { EventStore } from './components/eventStore'\nimport { defaultOptions, EmblaOptions } from './components/options'\nimport { addClass, debounce, removeClass } from './components/utils'\n\nexport type EmblaCarousel = {\n  canScrollNext: () => boolean\n  canScrollPrev: () => boolean\n  clickAllowed: () => boolean\n  containerNode: () => HTMLElement\n  dangerouslyGetEngine: () => Engine\n  destroy: () => void\n  off: EventEmitter['off']\n  on: EventEmitter['on']\n  previousScrollSnap: () => number\n  reInit: (options?: EmblaOptions) => void\n  scrollNext: () => void\n  scrollPrev: () => void\n  scrollProgress: () => number\n  scrollSnapList: () => number[]\n  scrollTo: (index: number) => void\n  selectedScrollSnap: () => number\n  slideNodes: () => HTMLElement[]\n  slidesInView: (target?: boolean) => number[]\n  slidesNotInView: (target?: boolean) => number[]\n}\n\nfunction EmblaCarousel(\n  sliderRoot: HTMLElement,\n  userOptions?: EmblaOptions,\n): EmblaCarousel {\n  const events = EventEmitter()\n  const eventStore = EventStore()\n  const debouncedResize = debounce(resize, 500)\n  const reInit = reActivate\n  const { on, off } = events\n\n  let engine: Engine\n  let activated = false\n  let options = Object.assign({}, defaultOptions)\n  let rootElementSize = 0\n  let container: HTMLElement\n  let slides: HTMLElement[]\n\n  activate(userOptions)\n\n  function storeElements(): void {\n    if (!sliderRoot) throw new Error('Missing root node ')\n\n    const selector = options.containerSelector\n    const sliderContainer = sliderRoot.querySelector(selector)\n\n    if (!sliderContainer) throw new Error('Missing container node ')\n\n    container = sliderContainer as HTMLElement\n    slides = Array.prototype.slice.call(container.children)\n  }\n\n  function activate(partialOptions?: EmblaOptions): void {\n    storeElements()\n    options = Object.assign(options, partialOptions)\n    engine = Engine(sliderRoot, container, slides, options, events)\n    rootElementSize = engine.axis.measure(sliderRoot)\n    eventStore.add(window, 'resize', debouncedResize)\n    engine.translate.to(engine.location)\n\n    if (options.loop) {\n      if (!engine.slideLooper.canLoop()) {\n        deActivate()\n        return activate({ loop: false })\n      }\n      engine.slideLooper.loop(slides)\n    }\n    if (options.draggable && slides.length) {\n      engine.dragHandler.addActivationEvents()\n      if (options.draggableClass) {\n        addClass(sliderRoot, options.draggableClass)\n      }\n      if (options.draggingClass) {\n        events\n          .on('pointerDown', toggleDraggingClass)\n          .on('pointerUp', toggleDraggingClass)\n      }\n    }\n    if (slides.length) {\n      engine.slideFocus.addActivationEvents(slides)\n    }\n    if (options.selectedClass) {\n      toggleSelectedClass()\n      events\n        .on('select', toggleSelectedClass)\n        .on('pointerUp', toggleSelectedClass)\n    }\n    if (!activated) {\n      setTimeout(() => events.emit('init'), 0)\n      activated = true\n    }\n  }\n\n  function toggleDraggingClass(evt: EmblaEvent): void {\n    const { draggingClass } = options\n    if (evt === 'pointerDown') addClass(sliderRoot, draggingClass)\n    else removeClass(sliderRoot, draggingClass)\n  }\n\n  function toggleSelectedClass(): void {\n    const { selectedClass } = options\n    const inView = slidesInView(true)\n    const notInView = slidesNotInView(true)\n    notInView.forEach(i => removeClass(slides[i], selectedClass))\n    inView.forEach(i => addClass(slides[i], selectedClass))\n  }\n\n  function deActivate(): void {\n    engine.dragHandler.removeAllEvents()\n    engine.slideFocus.removeAllEvents()\n    engine.animation.stop()\n    eventStore.removeAll()\n    engine.translate.clear()\n    engine.slideLooper.clear(slides)\n    removeClass(sliderRoot, options.draggableClass)\n    slides.forEach(s => removeClass(s, options.selectedClass))\n    events.off('select', toggleSelectedClass)\n    events.off('pointerUp', toggleSelectedClass)\n    events.off('pointerDown', toggleDraggingClass)\n    events.off('pointerUp', toggleDraggingClass)\n  }\n\n  function reActivate(partialOptions?: EmblaOptions): void {\n    if (!activated) return\n    const startIndex = selectedScrollSnap()\n    const newOptions = Object.assign({ startIndex }, partialOptions)\n    deActivate()\n    activate(newOptions)\n    events.emit('reInit')\n  }\n\n  function destroy(): void {\n    if (!activated) return\n    deActivate()\n    activated = false\n    events.emit('destroy')\n  }\n\n  function resize(): void {\n    if (!activated) return\n    const newRootElementSize = engine.axis.measure(sliderRoot)\n    if (rootElementSize !== newRootElementSize) reActivate()\n    events.emit('resize')\n  }\n\n  function slidesInView(target?: boolean): number[] {\n    const location = engine[target ? 'target' : 'location'].get()\n    const type = options.loop ? 'removeOffset' : 'constrain'\n    return engine.slidesInView.check(engine.limit[type](location))\n  }\n\n  function slidesNotInView(target?: boolean): number[] {\n    const inView = slidesInView(target)\n    return engine.slideIndexes.filter(i => inView.indexOf(i) === -1)\n  }\n\n  function scrollTo(index: number, direction?: number): void {\n    engine.scrollBody.useBaseMass().useBaseSpeed()\n    if (activated) engine.scrollTo.index(index, direction || 0)\n  }\n\n  function scrollNext(): void {\n    const next = engine.index.clone().add(1)\n    scrollTo(next.get(), -1)\n  }\n\n  function scrollPrev(): void {\n    const prev = engine.index.clone().add(-1)\n    scrollTo(prev.get(), 1)\n  }\n\n  function canScrollNext(): boolean {\n    const next = engine.index.clone().add(1)\n    return next.get() !== selectedScrollSnap()\n  }\n\n  function canScrollPrev(): boolean {\n    const prev = engine.index.clone().add(-1)\n    return prev.get() !== selectedScrollSnap()\n  }\n\n  function scrollSnapList(): number[] {\n    return engine.scrollSnaps.map(engine.scrollProgress.get)\n  }\n\n  function scrollProgress(): number {\n    return engine.scrollProgress.get(engine.location.get())\n  }\n\n  function selectedScrollSnap(): number {\n    return engine.index.get()\n  }\n\n  function previousScrollSnap(): number {\n    return engine.indexPrevious.get()\n  }\n\n  function clickAllowed(): boolean {\n    return engine.dragHandler.clickAllowed()\n  }\n\n  function dangerouslyGetEngine(): Engine {\n    return engine\n  }\n\n  function containerNode(): HTMLElement {\n    return container\n  }\n\n  function slideNodes(): HTMLElement[] {\n    return slides\n  }\n\n  const self: EmblaCarousel = {\n    canScrollNext,\n    canScrollPrev,\n    clickAllowed,\n    containerNode,\n    dangerouslyGetEngine,\n    destroy,\n    off,\n    on,\n    previousScrollSnap,\n    reInit,\n    scrollNext,\n    scrollPrev,\n    scrollProgress,\n    scrollSnapList,\n    scrollTo,\n    selectedScrollSnap,\n    slideNodes,\n    slidesInView,\n    slidesNotInView,\n  }\n  return self\n}\n\nexport default EmblaCarousel\n","export const setupPrevNextBtns = (prevBtn, nextBtn, embla) => {\n    prevBtn.addEventListener('click', embla.scrollPrev, false);\n    nextBtn.addEventListener('click', embla.scrollNext, false);\n};\n\nexport const disablePrevNextBtns = (prevBtn, nextBtn, embla) => {\n    return () => {\n        if (embla.canScrollPrev()) prevBtn.removeAttribute('disabled');\n        else prevBtn.setAttribute('disabled', 'disabled');\n\n        if (embla.canScrollNext()) nextBtn.removeAttribute('disabled');\n        else nextBtn.setAttribute('disabled', 'disabled');\n    };\n};\n","const PARALLAX_FACTOR = 1.2;\n\nexport const parallax = embla => {\n    const scrollSnaps = embla.scrollSnapList();\n    const slides = embla.slideNodes();\n    const layers = slides.map(node =>\n        node.querySelector(\".embla__slide__parallax\")\n    );\n\n    const applyParallaxStyles = () => {\n        scrollSnaps.forEach((scrollSnap, index) => {\n            const diffToTarget = scrollSnap - embla.scrollProgress();\n            const x = diffToTarget * (-1 / PARALLAX_FACTOR) * 100;\n            layers[index].style.transform = `translateX(${x}%)`;\n        });\n    };\n\n    return applyParallaxStyles;\n};\n","import EmblaCarousel from \"embla-carousel\";\nimport { setupPrevNextBtns, disablePrevNextBtns } from \"./prevAndNextButtons\";\nimport { parallax } from \"./parallax\";\nimport \"./reset.css\";\nimport \"./embla.css\";\n\nconst wrap = document.querySelector(\".embla\");\nconst viewPort = wrap.querySelector(\".embla__viewport\");\nconst prevBtn = wrap.querySelector(\".embla__button--prev\");\nconst nextBtn = wrap.querySelector(\".embla__button--next\");\nconst embla = EmblaCarousel(viewPort, {loop: true });\nconst startIndex = EmblaCarousel(1);\n\nconst applyParallaxStyles = parallax(embla);\nembla.on(\"init\", applyParallaxStyles);\nembla.on(\"scroll\", applyParallaxStyles);\nembla.on(\"resize\", applyParallaxStyles);\n\nconst disablePrevAndNextBtns = disablePrevNextBtns(prevBtn, nextBtn, embla);\nsetupPrevNextBtns(prevBtn, nextBtn, embla);\nembla.on(\"init\", disablePrevAndNextBtns);\nembla.on(\"select\", disablePrevAndNextBtns);\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}